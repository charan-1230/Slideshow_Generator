<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="{{ url_for('static', filename='images/favicon-32x32.png') }}" type="images">
    <link rel="stylesheet" href="{{url_for('static', filename='styles/style3.css')}}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Source+Code+Pro&display=swap"
        rel="stylesheet">
    <style>
        .image-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            /* Three columns with equal width */
            gap: 10px;
            /* Adjust the gap between images as needed */
        }

        .image-grid img {
            width: 100%;
            /* Make sure images fill the grid cells */
            height: auto;
            /* Maintain the aspect ratio of the images */
            border-radius: 8px;
            /* Optional: Add border-radius for rounded corners */
        }
    </style>
</head>

<body>
    <div class="a">
        Video Page
    </div>
    <div class="b">
        <h2>Image Grid</h2>
        <div class="image-grid">
            <img src="{{url_for('static', filename='images/image1.jpeg')}}" alt="Image 1">
            <img src="{{url_for('static', filename='images/image2.jpeg')}}" alt="Image 2">
            <img src="{{url_for('static', filename='images/image3.jpeg')}}" alt="Image 3">
            <img src="{{url_for('static', filename='images/image4.jpeg')}}" alt="Image 4">
            <img src="{{url_for('static', filename='images/image5.jpeg')}}" alt="Image 5">
            <img src="{{url_for('static', filename='images/image6.jpeg')}}" alt="Image 6">
        </div>
        <!-- <div class="image-grid">
            {% for image in selected_images %}
            <img src="{{ url_for('static', filename='images/' + image) }}" alt="{{ image }}">
            {% endfor %}
        </div> -->
    </div>

    <br><br>
    <hr style="width: 70%;"><br><br>

    <div>
        <h2 class="h"> Select Audio Files </h2>
    </div>

    <style>
        #audioList {
            text-align: center;
            margin: 10% 20%;
        }
    </style>
    <div id="audioList">
        <!-- <label>
                <audio controls>
                    <source src="{{url_for('static',filename='audio/As-It-Was-Song---Harry-Styles(musicdownload.cc).mp3')}}" type="audio/mpeg">
                </audio>
                <input type="checkbox" class="audioCheckbox" name="audio" value="audio1.mp3">
                Audio 1
            </label><br>
    
            <label>
                <audio controls>
                    <source src="{{url_for('static',filename='audio/cinematic-melody-main-9785.mp3')}}" type="audio/mpeg">
                </audio>
                <input type="checkbox" class="audioCheckbox" name="audio" value="audio2.mp3">
                Audio 2
            </label><br>

            <label>
                <audio controls>
                    <source src="{{url_for('static',filename='audio/happy-acoustic-guitar-background-music-122614.mp3')}}" type="audio/mpeg">
                </audio>
                <input type="checkbox" class="audioCheckbox" name="audio" value="audio2.mp3">
                Audio 3
            </label><br>

            <label>
                <audio controls>
                    <source src="{{url_for('static',filename='audio/jazzy-abstract-beat-11254.mp3')}}" type="audio/mpeg">
                </audio>
                <input type="checkbox" class="audioCheckbox" name="audio" value="audio2.mp3">
                Audio 4
            </label><br>

            <label>
                <audio controls>
                    <source src="{{url_for('static',filename='audio/penguinmusic-modern-chillout-future-calm-12641.mp3')}}" type="audio/mpeg">
                </audio>
                <input type="checkbox" class="audioCheckbox" name="audio" value="audio2.mp3">
                Audio 5
            </label><br> -->
        <div class="audio-div"></div>

        <button id="submitBtn">Submit Selection</button>



        <script>


            document.getElementById("submitBtn").addEventListener("click", function () {
                var selectedAudios = [];
                var checkboxes = document.querySelectorAll('.audioCheckbox:checked');
                checkboxes.forEach(function (checkbox) {
                    selectedAudios.push(checkbox.value);
                });
                // Send selectedAudios to backend (e.g., using fetch)
                console.log(selectedAudios); // Just for demonstration
                var submissionMessage = "Number of audio files submitted: " + checkboxes.length;
                alert(submissionMessage);
            });

            async function fetchAudio() {
                try {
                    // Fetch audio data from the server
                    const response = await fetch('/get_audio_from_database');
                    const data = await response.json();

                    // Extract audio IDs from the data
                    const audioIds = data.id;

                    // Load audio files asynchronously
                    const audioPromises = audioIds.map(async (Audio_id) => {
                        // Fetch audio file
                        const response = await fetch(`/audio/${Audio_id}`);
                        const blob = await response.blob();
                        return blob;
                    });

                    // Wait for all audio files to be loaded
                    const audioArray = await Promise.all(audioPromises);

                    // Display audio files
                    displayAudio(audioArray);
                } catch (error) {
                    console.error('Error fetching audio:', error);
                }
            }

            function displayAudio(audioData) {
                const audioContainer = document.querySelector('.audio-div');
                let audioHTML = '';

                audioData.forEach((audioBlob, index) => {
                    // Create an object URL for the audio blob
                    const audioUrl = URL.createObjectURL(audioBlob);

                    // Display audio element
                    audioHTML += `
            <li>
                <div class="audio" data-index="${index}">
                    <span class="index">Audio ${index + 1}</span>
                    <audio controls>
                        <source src="${audioUrl}" type="audio/mpeg">
                        Your browser does not support the audio element.
                    </audio>
                    <input type="checkbox" class="audioCheckbox" name="audio" value="${index}">
                </div>
            </li>
        `;
                });

                // Set HTML content to display audio elements
                audioContainer.innerHTML = audioHTML;
            }

            fetchAudio();
        </script>
    </div>



    <br><br>
    <hr style="width: 70%;"><br><br>

    <div class="b">
        <h2>Preview Video</h2>
        <video width="640" height="360" controls>
            <source src="{{url_for('static', filename='video/video.mp4')}}" type="video/mp4">
            <!-- <source src="your-video-file.webm" type="video/webm">
                <source src="your-video-file.ogv" type="video/ogg"> -->
            Your browser does not support the video tag.
        </video>

    </div>
    <div>
        <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ&pp=ygUIcmlja3JvbGw%3D" download
            style="text-decoration: none;text-align: center;">
            <h2>Download Video</h2>
        </a>
    </div>
</body>

</html>